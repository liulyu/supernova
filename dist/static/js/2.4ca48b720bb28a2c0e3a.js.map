{"version":3,"sources":["webpack:///src/base/listView/listview.vue","webpack:///./src/base/listView/listview.vue?8564","webpack:///./src/base/listView/listview.vue","webpack:///src/components/singer/singer.vue","webpack:///./src/components/singer/singer.vue?721d","webpack:///./src/components/singer/singer.vue","webpack:///./node_modules/core-js/library/fn/number/is-nan.js","webpack:///./node_modules/babel-runtime/core-js/number/is-nan.js","webpack:///./node_modules/core-js/library/modules/es6.number.is-nan.js","webpack:///./src/api/singer.js"],"names":["listview","_data$created$props$w","data","scrollY","currenIndex","diff","created","this","touch","listHeight","probeType","listenScroll","props","type","Array","default","watch","_this","$nextTick","getSingerHeightArray","newY","i","length","y1","y2","newDiff","fixedTop","$refs","style","transform","computed","shortcutList","map","group","title","substr","fixed_title","defineProperty_default","refresh","onShortcutTouchStart","e","anchorIndex","parseInt","Object","dom","target","firstTouch","touches","pageY","scrollTo","onShortcutTouchMove","moveNum","Math","floor","index","is_nan_default","scrollToElement","listGroup","scroll","pos","y","height","listItem","push","clientHeight","selectOne","item","$emit","Scroll","scroll_scroll","load","loading","listView_listview","render","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","on","_l","refInFor","_v","_s","click","$event","directives","name","rawName","value","expression","touchstart","preventDefault","touchmove","key","class","active","index-data","staticRenderFns","base_listView_listview","__webpack_require__","normalizeComponent","ssrContext","singer_singer","singers","_getSingerList","mixins","methods","extends_default","handlePlaylist","playlist","b","singer","bottom","list","$router","path","id","SET_SINGER","vuex_esm","then","res","code","config","_normalizeSinger","hot","items","forEach","js_singer","Fsinger_mid","Fsinger_name","Findex","ret","val","match","sort","a","charCodeAt","concat","components","ListView","components_singer_singer","singer_Component","singer_normalizeComponent","__webpack_exports__","module","exports","Number","isNaN","__esModule","$export","S","number","jsonpData","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","commonParams","channel","page","pagesize","pagenum","loginUin","hostUin","platform","needNewCode","jsonp","options","singermid","format","inCharset","outCharset","notice","order","from","num","begin"],"mappings":"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","file":"static/js/2.4ca48b720bb28a2c0e3a.js","sourcesContent":["<template>\n  <scroll :data=\"data\" \n  class=\"listview\"\n  ref=\"listview\"\n  @scroll=\"scroll\"\n  :probeType=\"probeType\"\n  :listenScroll=\"listenScroll\">\n    <ul>\n      <li v-for=\"(group,index) in data\" class=\"list-group\" ref=\"listGroup\">\n        <h2 class=\"list-group-title\">{{group.title}}</h2>\n        <ul>\n          <li v-for=\"item in group.items\" class=\"list-group-item\" @click=\"selectOne(item)\">\n            <img class=\"avatar\" v-lazy=\"item.avatar\">\n            <span class=\"name\">{{item.name}}</span>\n          </li>\n        </ul>\n      </li>\n    </ul>\n      <!-- @touchmove.stop.prevent在移动字母导航的时候禁止页面整体的滚动 因为滚动就是touchmove的默认事件-->\n      <ul class=\"list-shortcut\"  @touchstart.prevent=\"onShortcutTouchStart\" @touchmove.prevent=\"onShortcutTouchMove\">\n        <li v-for=\"(item, index) in shortcutList\"  class=\"item\" :index-data=index :key=\"index\" :class=\"{'active':index===currenIndex}\">\n           {{item}}\n        </li>\n      </ul>\n\n      <div class=\"list-fixed\" v-show=\"fixed_title\" ref=\"fixedTop\">\n          <h2 class=\"fixed-title\">{{fixed_title}}</h2>\n      </div>\n\n     <div class=\"loading-container\" v-show=\"!data.length\">\n        <load></load>\n      </div> \n  </scroll>\n    \n</template>\n\n<script>\n  import Scroll from 'base/scroll/scroll'\n  import {getData} from 'common/js/dom'\n  import load from \"base/load/loading\"\n  const TITLE_HEIGHT = 30\n  const ANCHOR_HEIGHT =17  //字母索引之间的距离间隔\n  const FIXED_HEIGHT=30\n  export default {\n    data(){\n      return{\n        scrollY:-1,\n        currenIndex:0,\n        diff:0 //下一个要显示的fixed_title和已经显示的fixed_title之间的距离 完全重合就是0\n      }\n    },\n    created(){\n      this.touch={};\n      this.listHeight = [];\n      this.probeType=3\n      this.listenScroll=true;\n    },\n    props: {\n      data: {\n        type: Array,\n        default: [],\n      },\n    },\n\n   watch:{\n     //想要在watch中观测的数据 就要放在data选项中 不能再created中定义\n     data(){\n       this.$nextTick(()=>{\n         this.getSingerHeightArray();\n       })\n     },\n\n     scrollY(newY){\n       let listHeight=this.listHeight\n        if(newY>0){\n          this.currenIndex=0;\n          return;\n        }\n\n        for (let i = 0; i < listHeight.length-1; i++) {\n          let y1=listHeight[i];\n          let y2=listHeight[i+1];\n          if(y2 && (-newY>=y1 && -newY<y2)){\n            this.currenIndex=i;\n            this.diff=y2+newY;\n            return \n          }\n        };\n\n        //this.currenIndex=listHeight.length-2\n     },\n     diff(newDiff){\n       //如果下一个title进入到了之前固定的title中 得到具体的值 不然返回0\n       let fixedTop=newDiff>=0 && newDiff<FIXED_HEIGHT ? newDiff-FIXED_HEIGHT:0;\n       this.$refs.fixedTop.style.transform=`translate3d(0,${fixedTop}px,0)`\n     }\n   \n   },\n    computed: {\n      shortcutList() {\n        return this.data.map((group) => {\n          return group.title.substr(0, 1)\n        })\n      },\n      //如果顶部向下拉 不显示fixed_title\n      fixed_title(){\n        if(this.scrollY>0){\n          return \"\";\n        }\n        return this.data.length && this.data[this.currenIndex].title\n      }\n    },\n   \n    created() {\n      this.probeType = 3        //better-scroll配置\n      this.listenScroll = true  //传给scroll组件是否监听滚动\n      this.touch = {}\n      this.listHeight = []      //每个歌手li的高度组成的集合\n    },\n    methods: {\n      refresh(){\n        this.$refs.listview.refresh();\n      },\n      onShortcutTouchStart(e) {\n        let anchorIndex = parseInt(getData(e.target, 'index'));\n        this.touch.anchorIndex=anchorIndex;\n        var firstTouch = e.touches[0].pageY;\n        this.touch.y1=firstTouch;\n        this.scrollTo(anchorIndex)\n      },\n      \n      onShortcutTouchMove(e){\n        var firstTouch = e.touches[0];\n        this.touch.y2=firstTouch.pageY;\n        let moveNum = Math.floor((this.touch.y2-this.touch.y1)/ANCHOR_HEIGHT);\n        this.scrollTo(this.touch.anchorIndex+moveNum)\n      },\n\n      scrollTo(index){\n        //前两个判断是滑动过程中超出导航区域 手动固定\n        //后一个判断是点击超出字母导航区域 本来getData的是null parseInt之后变成NaN\n        if(index<0 || index>this.listHeight.length-2 ||Number.isNaN(index)){\n          return\n        }\n        this.currenIndex=index;\n        this.$refs.listview.scrollToElement(this.$refs.listGroup[index],0)\n      },\n\n      scroll(pos){\n        this.scrollY=pos.y\n      },\n      //得到每个字母对应的歌手li的高度组成的数组\n      getSingerHeightArray(){\n          let height=0;\n          let listItem = this.$refs.listGroup;\n          this.listHeight.push(height)\n          for (let i = 0; i < listItem.length; i++) {\n            const element = listItem[i];\n            var cheight = element.clientHeight;\n            height+=cheight;\n            this.listHeight.push(height)\n          }\n      },\n      selectOne(item){\n        this.$emit(\"item\",item)\n      }\n    },\n  \n    components: {\n      Scroll,\n      load\n    }\n  }\n\n</script>\n\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\n  @import \"~common/stylus/variable\"\n  .listview\n    position: relative\n    width: 100%\n    height: 100%\n    overflow: hidden\n    .list-group\n      padding-bottom: 30px\n      .list-group-title\n        height: 30px\n        line-height: 30px\n        padding-left: 20px\n        font-size: $font-size-small\n        color: $color-text-l\n        background: $color-highlight-background\n      .list-group-item\n        display: flex\n        align-items: center\n        padding: 20px 0 0 30px\n        .avatar\n          width: 50px\n          height: 50px\n          border-radius: 50%\n        .name\n          margin-left: 20px\n          color: $color-text-l\n          font-size: $font-size-medium\n    .list-shortcut\n      position: absolute\n      z-index: 30\n      right: 0\n      top: 50%\n      transform: translateY(-50%)\n      width: 20px\n      padding: 20px 0\n      border-radius: 10px\n      text-align: center\n      background: $color-background-d\n      font-family: Helvetica\n      .item\n        padding: 3px\n        line-height: 1\n        color: $color-text-l\n        font-size: $font-size-small\n        &.active\n          color: $color-theme\n    .list-fixed\n      position: absolute\n      top: 0\n      left: 0\n      width: 100%\n      .fixed-title\n        height: 30px\n        line-height: 30px\n        padding-left: 20px\n        font-size: $font-size-small\n        color: $color-text-l\n        background: $color-highlight-background\n    .loading-container\n      position: absolute\n      width: 100%\n      top: 50%\n      transform: translateY(-50%)\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/base/listView/listview.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('scroll',{ref:\"listview\",staticClass:\"listview\",attrs:{\"data\":_vm.data,\"probeType\":_vm.probeType,\"listenScroll\":_vm.listenScroll},on:{\"scroll\":_vm.scroll}},[_c('ul',_vm._l((_vm.data),function(group,index){return _c('li',{ref:\"listGroup\",refInFor:true,staticClass:\"list-group\"},[_c('h2',{staticClass:\"list-group-title\"},[_vm._v(_vm._s(group.title))]),_vm._v(\" \"),_c('ul',_vm._l((group.items),function(item){return _c('li',{staticClass:\"list-group-item\",on:{\"click\":function($event){return _vm.selectOne(item)}}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.avatar),expression:\"item.avatar\"}],staticClass:\"avatar\"}),_vm._v(\" \"),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))])])}),0)])}),0),_vm._v(\" \"),_c('ul',{staticClass:\"list-shortcut\",on:{\"touchstart\":function($event){$event.preventDefault();return _vm.onShortcutTouchStart($event)},\"touchmove\":function($event){$event.preventDefault();return _vm.onShortcutTouchMove($event)}}},_vm._l((_vm.shortcutList),function(item,index){return _c('li',{key:index,staticClass:\"item\",class:{'active':index===_vm.currenIndex},attrs:{\"index-data\":index}},[_vm._v(\"\\n         \"+_vm._s(item)+\"\\n      \")])}),0),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.fixed_title),expression:\"fixed_title\"}],ref:\"fixedTop\",staticClass:\"list-fixed\"},[_c('h2',{staticClass:\"fixed-title\"},[_vm._v(_vm._s(_vm.fixed_title))])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.data.length),expression:\"!data.length\"}],staticClass:\"loading-container\"},[_c('load')],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-369df0f8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/listView/listview.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-369df0f8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./listview.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./listview.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./listview.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-369df0f8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./listview.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-369df0f8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/listView/listview.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"singer\" ref=\"singer\">\r\n    <ListView  :data=\"singers\" ref=\"list\" @item=\"item\"></ListView>\r\n    <router-view></router-view>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import ListView from 'base/listView/listview'\r\n  import {getSingerList} from 'api/singer'\r\n  import {ERR_OK} from 'api/config'\r\n  import {Singer} from 'common/js/singer'\r\n  import {mapMutations} from \"vuex\"\r\n  import {playmixins} from 'common/js/mixins';\r\n  const HOT_SINGER_LEN = 10\r\n  const HOT_NAME = '热门'\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        singers: []\r\n      }\r\n    },\r\n    created() {\r\n      this._getSingerList();\r\n    },\r\n    mixins:[playmixins],\r\n    methods: {\r\n      handlePlaylist(playlist){\r\n            let b =playlist.length>0 ? 60 :0;\r\n            this.$refs.singer.style.bottom=b+\"px\";\r\n            this.$refs.list.refresh();\r\n        },\r\n      item(data){\r\n          this.$router.push({path:`/singer/${data.id}`})\r\n          this.SET_SINGER(data);\r\n      },\r\n      \r\n      ...mapMutations([\r\n          \"SET_SINGER\"  //相当于this.SET_SINGER=this.$store.commit(\"SET_SINGER\")\r\n      ]),\r\n\r\n      _getSingerList() {\r\n        getSingerList().then((res) => {\r\n          if (res.code === ERR_OK) {\r\n            this.singers = this._normalizeSinger(res.data.list)\r\n          } \r\n        })\r\n      },\r\n      _normalizeSinger(list) {\r\n        let map = {\r\n          hot: {\r\n            title: HOT_NAME,\r\n            items: []\r\n          }\r\n        }\r\n        list.forEach((item, index) => {\r\n          if (index < HOT_SINGER_LEN) {\r\n            map.hot.items.push(new Singer({\r\n              id:item.Fsinger_mid,\r\n              name:item.Fsinger_name\r\n            }))\r\n          }\r\n          const key = item.Findex\r\n          if (!map[key]) {\r\n            map[key] = {\r\n              title: key,\r\n              items: []\r\n            }\r\n          }\r\n          map[key].items.push(new Singer({\r\n            id:item.Fsinger_mid,\r\n            name:item.Fsinger_name\r\n          }))\r\n        })\r\n        // 为了得到有序列表，我们需要处理 map\r\n        let ret = []\r\n        let hot = []\r\n        for (let key in map) {\r\n          let val = map[key]\r\n          if (val.title.match(/[a-zA-Z]/)) {\r\n            ret.push(val)\r\n          } else if (val.title === HOT_NAME) {\r\n            hot.push(val)\r\n          }\r\n        }\r\n        ret.sort((a, b) => {\r\n          return a.title.charCodeAt(0) - b.title.charCodeAt(0)\r\n        })\r\n        return hot.concat(ret)\r\n      },\r\n     \r\n    },\r\n    components: {\r\n      ListView\r\n    }\r\n  }\r\n\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n  .singer\r\n    position: fixed\r\n    top: 81px\r\n    bottom: 0\r\n    width: 100%\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/singer/singer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"singer\",staticClass:\"singer\"},[_c('ListView',{ref:\"list\",attrs:{\"data\":_vm.singers},on:{\"item\":_vm.item}}),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5595058e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/singer/singer.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5595058e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./singer.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5595058e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./singer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5595058e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/singer/singer.vue\n// module id = null\n// module chunks = ","require('../../modules/es6.number.is-nan');\nmodule.exports = require('../../modules/_core').Number.isNaN;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/number/is-nan.js\n// module id = K4R9\n// module chunks = 2","module.exports = { \"default\": require(\"core-js/library/fn/number/is-nan\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/number/is-nan.js\n// module id = MICi\n// module chunks = 2","// 20.1.2.4 Number.isNaN(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {\n  isNaN: function isNaN(number) {\n    // eslint-disable-next-line no-self-compare\n    return number != number;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.number.is-nan.js\n// module id = NA/8\n// module chunks = 2","import jsonp from \"common/js/jsonp.js\"\r\nimport {commonParams,options} from \"./config.js\"\r\n\r\nexport  function getSingerList(){\r\n    //加上jsonpCallback:\"callback\"报错 ----callback__jp5 is not defined\r\n    const jsonpData=Object.assign({},commonParams,{channel:\"singer\",page:\"list\",\r\n    key:\"all_all_all\",pagesize:30,pagenum:1,loginUin:0,\r\n    hostUin:0,platform:'ydd',needNewCode:0});\r\n\r\n    const url=\"https://c.y.qq.com/v8/fcg-bin/v8.fcg\";\r\n    return jsonp(url,jsonpData,options);\r\n};\r\n\r\nexport function getSingerDetal(id){\r\n    const data=Object.assign({},commonParams,{\r\n        singermid: id,\r\n\t\tformat: \"jsonp\",\r\n\t\tinCharset: \"utf-8\",\r\n\t\toutCharset: \"utf-8\",\r\n\t\tnotice: 0,\r\n\t\tplatform: \"h5page\",\r\n\t\tneedNewCode: 1,\r\n\t\torder: \"listen\",\r\n\t\tfrom: \"h5\",\r\n\t\tnum: 100, //获取歌曲数量\r\n\t\tbegin: 0\r\n    });\r\n    const url=\"https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg\";\r\n    return jsonp(url,data,options)\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/singer.js"],"sourceRoot":""}