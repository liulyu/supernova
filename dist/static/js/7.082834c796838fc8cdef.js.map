{"version":3,"sources":["webpack:///src/components/search/search.vue","webpack:///./src/components/search/search.vue?e9d6","webpack:///./src/components/search/search.vue"],"names":["search_search","data","hotKey","query","mixins","computed","extends_default","Object","vuex_esm","shortcut","this","concat","searchHistory","watch","newQuery","_this","$nextTick","$refs","refresh","components","serachBox","search_box","suggest","searchList","search_list","confirm","confirm_confirm","scroll","scroll_scroll","methods","handlePlaylist","playlist","b","length","shortcutWrapper","style","bottom","searchResult","suggestList","clearSearchHistory","_clearSearchHistory","isConfirm","show","_getHotKey","_this2","search","then","res","code","config","hotkey","splice","catch","err","console","log","created","components_search_search","render","_vm","_h","$createElement","_c","_self","staticClass","ref","on","onQueryChange","_v","directives","name","rawName","value","expression","attrs","_l","item","click","$event","addQuery","k","_s","searches","select","delete","deleteOneHistory","setSearchHistory","saveHistory","text","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/7.082834c796838fc8cdef.js","sourcesContent":["<template>\r\n    <div class=\"search\">\r\n        <div class=\"search-box-wrap\">\r\n                <serachBox ref=\"serachBox\" @query=\"onQueryChange\"></serachBox>\r\n        </div>\r\n        <div ref=\"shortcutWrapper\" class=\"shortcut-wrapper\" v-show=\"!query\">\r\n            <scroll class=\"shortcut\" :data=\"shortcut\" ref=\"shortcut\">\r\n                <div>\r\n                    <div class=\"hot-key\">\r\n                        <h1 class=\"title\">热门搜索</h1>\r\n                        <ul>\r\n                            <li @click=\"addQuery(item.k)\" class=\"item\" v-for=\"item in hotKey\">\r\n                                <span>{{item.k}}</span>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                \r\n                    <div class=\"search-history\" v-show=\"searchHistory && searchHistory.length\">\r\n                        <h1 class=\"title\">\r\n                            <span class=\"text\">搜索历史</span>\r\n                            <span class=\"clear\" @click=\"_clearSearchHistory\">\r\n                                <i class=\"icon-clear\" ></i>\r\n                            </span>\r\n                        </h1>\r\n                        <searchList  :searches=\"searchHistory\" @select=\"addQuery\" @delete=\"deleteOneHistory\"></searchList>\r\n                    </div>\r\n                </div>\r\n            </scroll>   \r\n        </div>\r\n        <div class=\"search-result\" v-show=\"query\" ref=\"searchResult\">\r\n            <suggest  ref=\"suggestList\" :query=\"query\" @setSearchHistory=\"saveHistory\"></suggest>\r\n        </div> \r\n        <confirm text=\"是否清空所有搜索记录!\" ref=\"isConfirm\"  @confirm=\"confirm\"></confirm>\r\n        <router-view></router-view> \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport serachBox from \"base/search-box/search-box\"\r\nimport suggest from \"base/suggest/suggest\"\r\nimport {getHotKey} from \"api/search\"\r\nimport {ERR_OK} from 'api/config'\r\nimport scroll from \"base/scroll/scroll\"\r\nimport searchList from \"base/search-list/search-list\"\r\nimport confirm from \"base/confirm/confirm\"\r\nimport {mapActions,mapGetters} from 'vuex';\r\nimport {playmixins,searchMixins} from 'common/js/mixins';\r\nexport default {\r\n    data(){\r\n        return{\r\n            hotKey:[],\r\n            query:\"\",\r\n        }\r\n    },\r\n    mixins:[playmixins,searchMixins],\r\n    computed:{\r\n        ...mapGetters([\r\n            \"searchHistory\",\r\n        ]),\r\n        shortcut(){\r\n            return this.hotKey.concat(this.searchHistory)\r\n        }\r\n    },\r\n    watch:{\r\n        query(newQuery){\r\n            this.$nextTick(()=>{\r\n                if(!newQuery){\r\n                    this.$refs.shortcut.refresh();\r\n                }\r\n            })\r\n        }\r\n    },\r\n    components:{\r\n        serachBox,\r\n        suggest,\r\n        searchList,\r\n        confirm,\r\n        scroll\r\n    },\r\n    methods:{\r\n        handlePlaylist(playlist){\r\n            let b =playlist.length>0 ? 60 :0;\r\n            this.$refs.shortcutWrapper.style.bottom=b+\"px\";\r\n            this.$refs.shortcut.refresh();\r\n\r\n            this.$refs.searchResult.style.bottom=b+\"px\";\r\n            this.$refs.suggestList.refresh();//不能直接操作scroll组件的refresh的方法 需要在suggest组件先调用\r\n        },\r\n        confirm(){\r\n            this.clearSearchHistory();\r\n        },\r\n        _clearSearchHistory(){\r\n            this.$refs.isConfirm.show();\r\n        },\r\n        ...mapActions([\r\n            \"saveHistory\",\r\n            \"deleteOneHistory\",\r\n            \"clearSearchHistory\"\r\n        ]),\r\n        \r\n        \r\n        \r\n        _getHotKey(){\r\n            getHotKey().then((res)=>{\r\n                if(res.code===ERR_OK){\r\n                    this.hotKey=res.data.hotkey.splice(0,10)\r\n                }\r\n            }).catch((err)=>{\r\n                console.log(err);\r\n            })\r\n        }\r\n    },\r\n\r\n    created(){\r\n        this._getHotKey();\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n    @import \"~common/stylus/variable\"\r\n    @import \"~common/stylus/mixin\"\r\n        .search\r\n            .search-box-wrap\r\n                margin:20px\r\n            .shortcut-wrapper\r\n                position: fixed\r\n                top: 178px\r\n                bottom: 0\r\n                width: 100%\r\n                .shortcut\r\n                    height:100%\r\n                    overflow:hidden\r\n                    .hot-key\r\n                        margin: 0 20px 20px 20px\r\n                        .title\r\n                            margin-bottom: 20px\r\n                            font-size: $font-size-medium\r\n                            color: $color-text-l\r\n                        .searchHistory\r\n                            height:100%\r\n                            overflow hidden    \r\n                        .item\r\n                            display: inline-block\r\n                            padding: 5px 10px\r\n                            margin: 0 20px 10px 0\r\n                            border-radius: 6px\r\n                            background: $color-highlight-background\r\n                            font-size: $font-size-medium\r\n                            color: $color-text-d\r\n            .search-history\r\n                position: relative\r\n                margin: 0 20px\r\n                .title\r\n                    display: flex\r\n                    align-items: center\r\n                    height: 40px\r\n                    font-size: $font-size-medium\r\n                    color: $color-text-l\r\n                    .text\r\n                       flex: 1\r\n                    .clear\r\n                       extend-click()\r\n                    .icon-clear\r\n                        font-size: $font-size-medium\r\n                        color: $color-text-d            \r\n            .search-result\r\n                position: fixed\r\n                width: 100%\r\n                top: 178px\r\n                bottom: 20px          \r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/search/search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\"},[_c('div',{staticClass:\"search-box-wrap\"},[_c('serachBox',{ref:\"serachBox\",on:{\"query\":_vm.onQueryChange}})],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.query),expression:\"!query\"}],ref:\"shortcutWrapper\",staticClass:\"shortcut-wrapper\"},[_c('scroll',{ref:\"shortcut\",staticClass:\"shortcut\",attrs:{\"data\":_vm.shortcut}},[_c('div',[_c('div',{staticClass:\"hot-key\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"热门搜索\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.hotKey),function(item){return _c('li',{staticClass:\"item\",on:{\"click\":function($event){return _vm.addQuery(item.k)}}},[_c('span',[_vm._v(_vm._s(item.k))])])}),0)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchHistory && _vm.searchHistory.length),expression:\"searchHistory && searchHistory.length\"}],staticClass:\"search-history\"},[_c('h1',{staticClass:\"title\"},[_c('span',{staticClass:\"text\"},[_vm._v(\"搜索历史\")]),_vm._v(\" \"),_c('span',{staticClass:\"clear\",on:{\"click\":_vm._clearSearchHistory}},[_c('i',{staticClass:\"icon-clear\"})])]),_vm._v(\" \"),_c('searchList',{attrs:{\"searches\":_vm.searchHistory},on:{\"select\":_vm.addQuery,\"delete\":_vm.deleteOneHistory}})],1)])])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.query),expression:\"query\"}],ref:\"searchResult\",staticClass:\"search-result\"},[_c('suggest',{ref:\"suggestList\",attrs:{\"query\":_vm.query},on:{\"setSearchHistory\":_vm.saveHistory}})],1),_vm._v(\" \"),_c('confirm',{ref:\"isConfirm\",attrs:{\"text\":\"是否清空所有搜索记录!\"},on:{\"confirm\":_vm.confirm}}),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-51b80248\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/search/search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-51b80248\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-51b80248\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-51b80248\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/search/search.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}